package org.xbmc.fakemailer.Activity;import android.content.Intent;import android.os.Bundle;import android.util.Log;import android.view.View;import android.webkit.WebSettings;import android.webkit.WebView;import android.widget.TextView;import android.widget.Toast;import androidx.appcompat.app.AppCompatActivity;import androidx.appcompat.widget.Toolbar;import com.github.ybq.android.spinkit.SpinKitView;import com.google.android.gms.ads.AdListener;import com.google.android.gms.ads.AdRequest;import com.google.android.gms.ads.AdView;import com.google.android.gms.ads.InterstitialAd;import org.jsoup.Jsoup;import org.jsoup.nodes.Document;import org.xbmc.fakemailer.Model.MailData;import org.xbmc.fakemailer.R;import org.xbmc.fakemailer.Utils.RestApiService;import org.xbmc.fakemailer.Utils.RetrofitInstance;import java.io.IOException;import java.util.ArrayList;import retrofit2.Call;import retrofit2.Callback;import retrofit2.Response;public class MaildetailsActivity extends AppCompatActivity {    String username, domain, mailId;    public AdView mAdView1, mAdView2;    TextView txt_eror, txt_user_name, txt_mail_id, txt_subj, txt_date;    SpinKitView spin_kit;    Toolbar toolbar;    private InterstitialAd interstitialAd;    ArrayList<MailData> arrayListFrom, arrayListTo;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_maildetails);        initViews();        clickViews();        arrayListFrom = new ArrayList<>();        arrayListTo = new ArrayList<>();        Intent intent = getIntent();        if (intent != null) {            username = intent.getStringExtra("username");            domain = intent.getStringExtra("domain");            mailId = intent.getStringExtra("mailid");        }        getMailData();    }    private void clickViews() {        toolbar.setNavigationOnClickListener(view -> {            showInterstitial();            finish();        });    }    private void initViews() {        txt_user_name = findViewById(R.id.txt_user_name);        txt_eror = findViewById(R.id.txt_eror);        spin_kit = findViewById(R.id.spin_kit);        txt_mail_id = findViewById(R.id.txt_mail_id);        txt_subj = findViewById(R.id.txt_subj);        txt_date = findViewById(R.id.txt_date);        mAdView1 = findViewById(R.id.adView1);        mAdView2 = findViewById(R.id.adView2);        toolbar = findViewById(R.id.toolbar);        spin_kit.setVisibility(View.VISIBLE);        interstitialAd = new InterstitialAd(MaildetailsActivity.this);        interstitialAd.setAdUnitId("ca-app-pub-3094951374738350/5733453113");        AdRequest adRequest1 = new AdRequest.Builder().build();        interstitialAd.loadAd(adRequest1);        AdRequest adRequest = new AdRequest.Builder().build();        mAdView1.loadAd(adRequest);        AdRequest adRequest2 = new AdRequest.Builder().build();        mAdView2.loadAd(adRequest2);    }    private void getMailData() {        RestApiService apiInterface = RetrofitInstance.getClient().create(RestApiService.class);        spin_kit.setVisibility(View.VISIBLE);        Call<MailData> call = apiInterface.getMailData(username, domain, mailId);        call.enqueue(new Callback<MailData>() {            @Override            public void onResponse(Call<MailData> call, Response<MailData> response) {                if (response.body() != null)                    if (response.isSuccessful()) {                        spin_kit.setVisibility(View.GONE);                        if (response.body().getSuccess().equals("true")) {                            arrayListFrom = response.body().getResult().getFrom();                            arrayListTo = response.body().getResult().getTo();                            txt_user_name.setText(arrayListFrom.get(0).getDisplay());                            txt_mail_id.setText("From: " + arrayListFrom.get(0).getAddress());                            txt_subj.setText("Subject: " + response.body().getResult().getSubject());                            WebView webView = (WebView) findViewById(R.id.webview);                            String html = response.body().getResult().getHtml_body();                            String txt_details = response.body().getResult().getText_body();                            String[] parts = txt_details.split("\n\n");                            String details = parts[0];                            String html_tag = "<!DOCTYPE html>" + "<html><body>" + html + "</body> </htlm>";                            webView.getSettings().setLoadWithOverviewMode(true);                            webView.setInitialScale(180);                            webView.getSettings().setJavaScriptEnabled(true);                            webView.loadDataWithBaseURL(                                    null,                                    html_tag,                                    "text/html",                                    "UTF-8",                                    null                            );                            txt_date.setText(response.body().getResult().getDate());                        } else {                            txt_eror.setVisibility(View.VISIBLE);                            spin_kit.setVisibility(View.GONE);                            Toast.makeText(getApplicationContext(), "Some Network Issues", Toast.LENGTH_SHORT).show();                        }                    }            }            @Override            public void onFailure(Call<MailData> call, Throwable t) {                spin_kit.setVisibility(View.GONE);                Log.d("errrrrrr", t + "");                txt_eror.setVisibility(View.VISIBLE);                Toast.makeText(getApplicationContext(), "Some Network Issues", Toast.LENGTH_SHORT).show();            }        });    }    private void showInterstitial() {        if (interstitialAd != null & interstitialAd.isLoaded()) {            interstitialAd.show();        } else {            Log.d("intertitial ads eror", "eror");        }        interstitialAd.setAdListener(new AdListener() {            @Override            public void onAdClosed() {                interstitialAd.loadAd(new AdRequest.Builder().build());            }        });    }}